<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin - Artes Luis Studio</title>
<link rel="stylesheet" href="nosotros.css">

<style>
/* =========================
   BOTÓN CERRAR SESIÓN
   ========================= */
.logout-btn {
  width: 100%;
  max-width: 320px;
  padding: 12px;
  background: linear-gradient(90deg, #ff6a00, #ee0979);
  color: #fff;
  border: none;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.3s ease;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 4px 12px rgba(238, 9, 121, 0.4);
  margin-top: 20px;
}

.logout-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(255, 105, 180, 0.4);
}

.logout-btn:active {
  transform: scale(0.98);
  box-shadow: 0 2px 10px rgba(238, 9, 121, 0.3);
}

/* === PANEL ADMIN === */
.admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.card {
  background: #fff;
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 6px 18px rgba(2, 6, 23, 0.06);
  margin-top: 18px;
}
.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
input[type="text"], input[type="file"] {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #e2e8f0;
  width: 100%;
}
.btn-save {
  background: #10b981;
  color: white;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
.btn-save:hover { background: #059669; }

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 12px;
  margin-top: 10px;
}
.thumb {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  transition: transform .3s;
}
.thumb:hover { transform: scale(1.05); }

/* === MODAL === */
.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.modal img {
  max-width: 90%;
  max-height: 80%;
  border-radius: 10px;
}
.modal .close {
  position: absolute;
  top: 20px;
  right: 30px;
  color: white;
  font-size: 2rem;
  cursor: pointer;
}
</style>
</head>

<body class="nosotros-page">
  <nav class="sidebar">
    <a href="index.html">Inicio</a>
    <a href="nosotros.html">Nosotros</a>
    <a href="mision.html">Misión - Visión</a>
    <a href="portafolio.html">Portafolio</a>
    <a href="planes.html">Planes</a>
    <a href="contacto.html">Contacto</a>
    <button class="logout-btn" id="logoutBtn">Cerrar sesión</button>
  </nav>

  <main style="margin-left:260px;padding:30px">
    <div class="admin-header">
      <h1 style="color:#2563eb">Panel de Administración</h1>
    </div>

    <section class="card">
      <h3>Agregar imagen al enlace / portafolio</h3>
      <div class="controls">
        <input type="file" id="fileInput" accept="image/*">
        <input type="text" id="urlInput" placeholder="O pega URL de imagen">
        <input type="text" id="linkInput" placeholder="Enlace que abrirá la imagen">
        <button id="addBtn" class="btn-save">Agregar</button>
      </div>
      <p style="font-size:0.9rem;color:#475569;margin-top:8px">
        Puedes subir desde archivo o pegar URL. Las imágenes se guardan en localStorage y se muestran en <strong>enlace.html</strong>.
      </p>
    </section>

    <section class="card">
      <h3>Imágenes actuales</h3>
      <div id="items" class="grid"></div>
    </section>
  </main>

<script>
const STORAGE_KEY = 'gallery_v3';

// === Funciones para almacenamiento ===
function loadImages() {
  return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
}
function saveImages(arr) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
}

// === Renderizado de imágenes guardadas ===
function render() {
  const container = document.getElementById('items');
  const imgs = loadImages();
  container.innerHTML = '';

  imgs.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'card-item';

    const img = document.createElement('img');
    img.src = item.src;
    img.className = 'thumb';
    img.addEventListener('click', () => showModal(item.src));

    const link = document.createElement('input');
    link.type = 'text';
    link.value = item.link || '';
    link.placeholder = 'Enlace';

    const btns = document.createElement('div');
    btns.style.display = 'flex';
    btns.style.gap = '6px';
    btns.style.marginTop = '8px';

    const edit = document.createElement('button');
    edit.textContent = 'Editar';
    edit.className = 'btn-save';
    edit.style.background = '#2563eb';
    edit.onclick = () => {
      const nuevaURL = prompt('Pega nueva URL:');
      if (nuevaURL) {
        imgs[i].src = nuevaURL;
        saveImages(imgs);
        render();
      }
    };

    const save = document.createElement('button');
    save.textContent = 'Guardar';
    save.className = 'btn-save';
    save.style.background = '#10b981';
    save.onclick = () => {
      imgs[i].link = link.value.trim();
      saveImages(imgs);
      alert('Enlace actualizado.');
    };

    const del = document.createElement('button');
    del.textContent = 'Eliminar';
    del.className = 'btn-save';
    del.style.background = '#ef4444';
    del.onclick = () => {
      if (confirm('¿Eliminar imagen?')) {
        imgs.splice(i, 1);
        saveImages(imgs);
        render();
      }
    };

    btns.append(edit, save, del);
    div.append(img, link, btns);
    container.append(div);
  });
}

// === Mostrar modal ===
function showModal(src) {
  const modal = document.createElement('div');
  modal.className = 'modal';
  modal.innerHTML = `
    <span class="close">&times;</span>
    <img src="${src}">
  `;
  modal.querySelector('.close').onclick = () => modal.remove();
  modal.onclick = e => { if (e.target === modal) modal.remove(); };
  document.body.append(modal);
}

// === Agregar imagen con vista previa ===
document.getElementById('fileInput').addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const preview = document.createElement('img');
  preview.className = 'thumb';
  preview.src = URL.createObjectURL(file);
  preview.style.border = '2px dashed #2563eb';
  preview.style.marginTop = '10px';
  preview.id = 'previewImg';

  const existingPreview = document.getElementById('previewImg');
  if (existingPreview) existingPreview.remove();
  document.querySelector('.controls').append(preview);
});

// === Botón Agregar ===
document.getElementById('addBtn').addEventListener('click', () => {
  const file = document.getElementById('fileInput').files[0];
  const url = document.getElementById('urlInput').value.trim();
  const link = document.getElementById('linkInput').value.trim();
  const imgs = loadImages();

  if (imgs.length >= 100) return alert('Máximo 100 imágenes.');

  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      imgs.push({ src: e.target.result, link });
      saveImages(imgs);
      render();
      alert('Imagen agregada correctamente.');
      document.getElementById('fileInput').value = '';
      document.getElementById('previewImg')?.remove();
    };
    reader.readAsDataURL(file);
  } else if (url) {
    imgs.push({ src: url, link });
    saveImages(imgs);
    render();
    alert('Imagen agregada correctamente.');
  } else {
    alert('Selecciona una imagen o ingresa URL.');
  }
});

// === Botón cerrar sesión ===
document.getElementById('logoutBtn').addEventListener('click', () => {
  localStorage.removeItem('isLoggedIn');
  window.location.href = 'login.html';
});

// Inicializar
render();



</script>

</body>
</html>
