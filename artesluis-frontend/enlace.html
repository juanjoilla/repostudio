<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portafolio de Diseño: Muestra de Proyectos Creativos</title>
    <!-- Enlace a Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="enlace.css">
</head>

<body>
    <section class="gallery">
        <h1>Muestra de Proyectos Creativos</h1>
        <div class="grid-container">
            <!-- Galería de imágenes -->
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_001.jpg">
                <img src="img/diseño_001.jpg" alt="Diseño 1">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_002.jpg">
                <img src="img/diseño_002.jpg" alt="Diseño 2">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_003.jpg">
                <img src="img/diseño_003.jpg" alt="Diseño 3">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_004.jpg">
                <img src="img/diseño_004.jpg" alt="Diseño 4">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_005.jpg">
                <img src="img/diseño_005.jpg" alt="Diseño 5">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_006.jpg">
                <img src="img/diseño_006.jpg" alt="Diseño 6">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_007.jpg">
                <img src="img/diseño_007.jpg" alt="Diseño 7">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_008.jpg">
                <img src="img/diseño_008.jpg" alt="Diseño 8">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_009.jpg">
                <img src="img/diseño_009.jpg" alt="Diseño 9">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_010.jpg">
                <img src="img/diseño_010.jpg" alt="Diseño 10">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_011.jpg">
                <img src="img/diseño_011.jpg" alt="Diseño 11">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_012.jpg">
                <img src="img/diseño_012.jpg" alt="Diseño 12">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_013.jpg">
                <img src="img/diseño_013.jpg" alt="Diseño 13">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_014.jpg">
                <img src="img/diseño_014.jpg" alt="Diseño 14">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_015.jpg">
                <img src="img/diseño_015.jpg" alt="Diseño 15">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_016.jpg">
                <img src="img/diseño_016.jpg" alt="Diseño 16">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_017.jpg">
                <img src="img/diseño_017.jpg" alt="Diseño 17">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_018.jpg">
                <img src="img/diseño_018.jpg" alt="Diseño 18">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_019.jpg">
                <img src="img/diseño_019.jpg" alt="Diseño 19">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_020.jpg">
                <img src="img/diseño_020.jpg" alt="Diseño 20">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_021.jpg">
                <img src="img/diseño_021.jpg" alt="Diseño 21">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_022.jpg">
                <img src="img/diseño_022.jpg" alt="Diseño 22">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_023.jpg">
                <img src="img/diseño_023.jpg" alt="Diseño 23">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_024.jpg">
                <img src="img/diseño_024.jpg" alt="Diseño 24">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_025.jpg">
                <img src="img/diseño_025.jpg" alt="Diseño 25">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_026.jpg">
                <img src="img/diseño_026.jpg" alt="Diseño 26">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_027.jpg">
                <img src="img/diseño_027.jpg" alt="Diseño 27">
            </div>
            <div class="grid-item" data-toggle="modal" data-target="#imageModal" data-img="img/diseño_028.jpg">
                <img src="img/diseño_028.jpg" alt="Diseño 28">
            </div>
        </div>
    </section>

    <!-- Modal de Vista Previa de Imagen -->
    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="" alt="Vista previa" id="modalImage" class="img-fluid">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Enlace a Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        // Script para cargar la imagen en el modal
        $('#imageModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget); // Elemento que activó el modal
            var imgSrc = button.data('img'); // Obtiene la ruta de la imagen
            var modal = $(this);
            modal.find('#modalImage').attr('src', imgSrc); // Establece la imagen en el modal
        });
    </script>

<!-- ADMIN GALLERY SCRIPT FINAL -->
<script>
(function(){
  const STORAGE_KEY = 'gallery_v3';

  function loadUserImages() {
    return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  }

  function ensureGridContainer() {
    let container = document.querySelector('.grid-container');
    if (!container) {
      const gallerySection = document.querySelector('.gallery') || document.body;
      container = document.createElement('div');
      container.className = 'grid-container';
      gallerySection.appendChild(container);
    }
    return container;
  }

  function renderUserImages() {
    const users = loadUserImages();
    const container = ensureGridContainer();

    // Eliminar imágenes dinámicas anteriores
    container.querySelectorAll('.grid-item[data-user="1"]').forEach(n => n.remove());

    users.forEach((u, index) => {
      const div = document.createElement('div');
      div.className = 'grid-item';
      div.setAttribute('data-user', '1');

      // Crear imagen con evento único
      const img = document.createElement('img');
      img.src = u.src;
      img.alt = 'Proyecto';
      img.loading = 'lazy';
      img.dataset.index = index;

      img.addEventListener('click', () => openModal(u.src));

      // Si hay enlace externo
      if (u.link && u.link.trim() !== '') {
        const a = document.createElement('a');
        a.href = u.link;
        a.target = '_blank';
        a.appendChild(img);
        div.appendChild(a);
      } else {
        div.appendChild(img);
      }

      container.appendChild(div);
    });
  }

  // Abrir modal con la imagen seleccionada
  function openModal(src) {
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    modalImg.src = src;
    $(modal).modal('show');
  }

  // Renderizar al cargar la página
  window.addEventListener('load', () => {
    renderUserImages();

    // También aseguramos que las imágenes estáticas abran correctamente
    document.querySelectorAll('.grid-item img:not([data-user])').forEach(img => {
      img.addEventListener('click', () => openModal(img.src));
    });
  });

  // Si cambia el localStorage (otra pestaña o admin)
  window.addEventListener('storage', e => {
    if (e.key === STORAGE_KEY) renderUserImages();
  });
})();
</script>
<!-- ADMIN GALLERY SCRIPT FINAL -->



</body>

</html>
